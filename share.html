<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分享你嘅工作 CP 值</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="share.css">
</head>
<body>
    <header>
        <h1><i class="fas fa-share-alt"></i> 我嘅工作 CP 值報告</h1>
        <p>同朋友分享你嘅工作評估結果！</p>
    </header>
    <div class="container">
        <div class="card result-card">
            <h2><i class="fas fa-chart-bar"></i> 評估結果</h2>
            <div class="score-circle">
                <span id="worth"></span>
            </div>
            <h3 id="result"></h3>
            <div class="result-description" id="result-description"></div>
            <div class="share-buttons">
                <button onclick="shareToSocial('facebook')"><i class="fab fa-facebook"></i> 分享到 Facebook</button>
                <button onclick="shareToSocial('twitter')"><i class="fab fa-twitter"></i> 分享到 Twitter</button>
                <button onclick="copyLink()"><i class="fas fa-link"></i> 複製連結</button>
            </div>
        </div>
        <div class="card">
            <h2><i class="fas fa-list"></i> 我嘅選擇</h2>
            <div id="user-report"></div>
        </div>
        <div class="card">
            <h2><i class="fas fa-globe"></i> 香港平均數據比較</h2>
            <div id="comparison-report"></div>
        </div>
        <div class="card">
            <h2><i class="fas fa-info-circle"></i> 結果解釋</h2>
            <p>呢個工作 CP 值得分係基於多項因素計算，包括工作時數、通勤時間、年假、工作環境、壓力、職業發展機會等。以下係得分嘅評級標準：</p>
            <ul>
                <li><strong>1-20 分：畜生活</strong> - 你嘅工作可能好辛苦，CP 值好低，建議考慮搵新機會。</li>
                <li><strong>21-40 分：好辛苦 (😓)</strong> - 工作負擔重，報酬同付出唔成正比，可以同老細傾吓改善條件。</li>
                <li><strong>41-60 分：正常啦 (😐)</strong> - 工作同報酬算平衡，但仲有進步空間。</li>
                <li><strong>61-80 分：幾好 (😊)</strong> - 工作 CP 值唔錯，值得繼續努力。</li>
                <li><strong>81-95 分：好正嘅工作 (😎)</strong> - 恭喜！你嘅工作 CP 值好高，係一個好正嘅選擇。</li>
                <li><strong>96-100 分：你上世拯救過宇宙 (🤩)</strong> - 你嘅工作係夢想級別，繼續保持！</li>
            </ul>
        </div>
        <div class="card">
            <h2><i class="fas fa-home"></i> 返去主頁</h2>
            <p>想再試吓？返去主頁重新評估你嘅工作！</p>
            <button onclick="window.location.href='index.html'"><i class="fas fa-arrow-left"></i> 返去主頁</button>
        </div>
    </div>
    <script>
        // 文字映射
        const workEnvText = { 5: "甲級寫字樓", 4: "普通商業大樓/在家工作", 3: "工業大廈", 2: "工廠" };
        const colleagueEnvText = { 1: "全部都係PK", 2: "好多 Free Rider", 3: "萍水相逢", 4: "開心工作", 5: "Friend 過夾band" };
        const workStressText = { 1: "完全無壓力", 2: "壓力少", 3: "一般壓力", 4: "壓力大", 5: "極大壓力" };
        const careerGrowthText = { 1: "完全無機會", 2: "機會少", 3: "一般機會", 4: "機會多", 5: "極多機會" };
        const toiletCleanlinessText = { 1: "好污糟", 2: "一般污糟", 3: "麻麻地", 4: "乾淨", 5: "超級乾淨" };
        const bossAttitudeText = { 1: "垃圾老細", 2: "好嚴格", 3: "麻麻地", 4: "Okay啦", 5: "非常好" };
        const medicalInsuranceText = { 0: "無", 1: "有" };
        const industryText = { finance: "金融", education: "教育", retail: "零售", it: "資訊科技", others: "其他" };
        const educationText = { 1: "大專", 2: "大學生", 3: "碩士", 4: "博士" };
        const uniTypeText = { 1: "大專", 2: "私大（樹仁/恒大）", 3: "八大", 4: "海歸（外國升學）" };

        // 香港平均數據（模擬 API 數據）
        const hkStats = {
            avgHoursPerDay: 8.7,
            avgStressLevel: 3.2,
            avgAnnualLeave: 10,
            avgCommuteTime: 0.8,
            avgTransportCost: 30
        };

        // 從 URL 獲取 worth 同 result
        const urlParams = new URLSearchParams(window.location.search);
        const worth = parseFloat(urlParams.get('worth')).toFixed(1);
        const result = decodeURIComponent(urlParams.get('result'));

        // 從 localStorage 獲取報告數據
        const reportData = JSON.parse(localStorage.getItem('reportData'));

        // 檢查報告數據是否存在
        if (!reportData) {
            document.getElementById('user-report').innerHTML = '<p>未能載入報告數據，請返回主頁重新評估！</p>';
            document.getElementById('comparison-report').innerHTML = '<p>未能載入比較數據，請返回主頁重新評估！</p>';
            return;
        }

        document.getElementById('worth').innerText = worth;
        document.getElementById('result').innerText = result;

        let description = '';
        if (worth <= 20) {
            description = '你嘅工作 CP 值好低，可能係一個「畜生活」。建議你重新審視工作條件，或者考慮搵新機會！';
        } else if (worth <= 40) {
            description = '你嘅工作好辛苦，報酬同付出唔成正比。試吓同老細傾改善條件，或者搵新嘅發展機會！';
        } else if (worth <= 60) {
            description = '你嘅工作 CP 值正常，唔算差，但仲有進步空間。可以考慮點樣提升工作環境或者爭取更好嘅待遇！';
        } else if (worth <= 80) {
            description = '你嘅工作 CP 值幾好，報酬同付出比較平衡。繼續努力，或者搵方法再提升自己！';
        } else if (worth <= 95) {
            description = '你嘅工作 CP 值好高，係一個好正嘅選擇！繼續保持，同時可以搵更多發展機會！';
        } else {
            description = '你嘅工作 CP 值係夢想級別，簡直係完美！繼續享受你嘅工作，同時分享你嘅經驗畀其他人！';
        }
        document.getElementById('result-description').innerText = description;

        // 顯示用戶報告（過濾薪酬資料）
        const userReport = `
            <table>
                <tr><th>項目</th><th>資料</th></tr>
                <tr><td><i class="fas fa-calendar-week"></i> 每週工作天數</td><td>${reportData.workDaysPerWeek} 天</td></tr>
                <tr><td><i class="fas fa-home"></i> 每週在家工作天數</td><td>${reportData.wfhDaysPerWeek} 天</td></tr>
                <tr><td><i class="fas fa-clock"></i> 每日工作時數</td><td>${reportData.hoursPerDay} 小時</td></tr>
                <tr><td><i class="fas fa-utensils"></i> 食飯時間</td><td>${reportData.lunchTime} 小時</td></tr>
                <tr><td><i class="fas fa-car"></i> 單程通勤時間</td><td>${reportData.commute} 小時</td></tr>
                <tr><td><i class="fas fa-ticket-alt"></i> 每日車費</td><td>${reportData.transportCost} HKD</td></tr>
                <tr><td><i class="fas fa-umbrella-beach"></i> 年假日數</td><td>${reportData.annualLeave} 天</td></tr>
                <tr><td><i class="fas fa-building"></i> 工作環境</td><td>${workEnvText[reportData.workEnvScore]}</td></tr>
                <tr><td><i class="fas fa-users"></i> 同事環境</td><td>${colleagueEnvText[reportData.colleagueEnvScore]}</td></tr>
                <tr><td><i class="fas fa-exclamation-circle"></i> 工作壓力</td><td>${workStressText[reportData.workStressScore]}</td></tr>
                <tr><td><i class="fas fa-chart-line"></i> 職業發展機會</td><td>${careerGrowthText[reportData.careerGrowthScore]}</td></tr>
                <tr><td><i class="fas fa-toilet"></i> 公司廁所清潔度</td><td>${toiletCleanlinessText[reportData.toiletCleanlinessScore]}</td></tr>
                <tr><td><i class="fas fa-user-tie"></i> 老細態度</td><td>${bossAttitudeText[reportData.bossAttitudeScore]}</td></tr>
                <tr><td><i class="fas fa-heartbeat"></i> 有無醫療保險</td><td>${medicalInsuranceText[reportData.medicalInsurance]}</td></tr>
                <tr><td><i class="fas fa-briefcase"></i> 行業</td><td>${industryText[reportData.industry]}</td></tr>
                <tr><td><i class="fas fa-graduation-cap"></i> 學業水準</td><td>${educationText[reportData.educationScore]}</td></tr>
                <tr><td><i class="fas fa-briefcase"></i> 工作經驗</td><td>${reportData.experience} 年</td></tr>
                <tr><td><i class="fas fa-university"></i> 大學類型</td><td>${uniTypeText[reportData.uniTypeScore]}</td></tr>
            </table>
        `;
        document.getElementById('user-report').innerHTML = userReport;

        // 香港平均數據比較
        const hoursComparison = reportData.hoursPerDay > hkStats.avgHoursPerDay 
            ? `高於香港平均 (${hkStats.avgHoursPerDay} 小時) ${((reportData.hoursPerDay - hkStats.avgHoursPerDay) / hkStats.avgHoursPerDay * 100).toFixed(1)}%`
            : reportData.hoursPerDay < hkStats.avgHoursPerDay 
            ? `低於香港平均 (${hkStats.avgHoursPerDay} 小時) ${((hkStats.avgHoursPerDay - reportData.hoursPerDay) / hkStats.avgHoursPerDay * 100).toFixed(1)}%`
            : "等於香港平均";

        const minAnnualLeave = reportData.experience <= 2 ? 7 : reportData.experience <= 4 ? 8 : reportData.experience <= 9 ? 10 : 14;
        const leaveComparison = reportData.annualLeave > minAnnualLeave 
            ? `高於香港法定標準 (${minAnnualLeave} 天) ${((reportData.annualLeave - minAnnualLeave) / minAnnualLeave * 100).toFixed(1)}%`
            : reportData.annualLeave < minAnnualLeave 
            ? `低於香港法定標準 (${minAnnualLeave} 天) ${((minAnnualLeave - reportData.annualLeave) / minAnnualLeave * 100).toFixed(1)}%`
            : "等於香港法定標準";

        const stressComparison = reportData.workStressScore > hkStats.avgStressLevel 
            ? `高於香港平均壓力水平 (${hkStats.avgStressLevel}/5)`
            : reportData.workStressScore < hkStats.avgStressLevel 
            ? `低於香港平均壓力水平 (${hkStats.avgStressLevel}/5)`
            : "等於香港平均壓力水平";

        const commuteComparison = reportData.commute > hkStats.avgCommuteTime 
            ? `高於香港平均 (${hkStats.avgCommuteTime} 小時) ${((reportData.commute - hkStats.avgCommuteTime) / hkStats.avgCommuteTime * 100).toFixed(1)}%`
            : reportData.commute < hkStats.avgCommuteTime 
            ? `低於香港平均 (${hkStats.avgCommuteTime} 小時) ${((hkStats.avgCommuteTime - reportData.commute) / hkStats.avgCommuteTime * 100).toFixed(1)}%`
            : "等於香港平均";

        const transportCostComparison = reportData.transportCost > hkStats.avgTransportCost 
            ? `高於香港平均 (${hkStats.avgTransportCost} HKD) ${((reportData.transportCost - hkStats.avgTransportCost) / hkStats.avgTransportCost * 100).toFixed(1)}%`
            : reportData.transportCost < hkStats.avgTransportCost 
            ? `低於香港平均 (${hkStats.avgTransportCost} HKD) ${((hkStats.avgTransportCost - reportData.transportCost) / hkStats.avgTransportCost * 100).toFixed(1)}%`
            : "等於香港平均";

        const comparisonReport = `
            <table>
                <tr><th>項目</th><th>比較</th></tr>
                <tr><td><i class="fas fa-clock"></i> 每日工作時數</td><td>${hoursComparison}（香港平均數據：${hkStats.avgHoursPerDay} 小時，來源：香港統計處 2024 年報告）</td></tr>
                <tr><td><i class="fas fa-umbrella-beach"></i> 年假日數</td><td>${leaveComparison}（香港平均數據：${hkStats.avgAnnualLeave} 天，來源：香港勞工處 2024 年報告）</td></tr>
                <tr><td><i class="fas fa-exclamation-circle"></i> 工作壓力</td><td>${stressComparison}（香港平均數據：${hkStats.avgStressLevel}/5，來源：香港政府健康署 2024 年報告）</td></tr>
                <tr><td><i class="fas fa-car"></i> 單程通勤時間</td><td>${commuteComparison}（香港平均數據：${hkStats.avgCommuteTime} 小時，來源：香港運輸署 2024 年報告）</td></tr>
                <tr><td><i class="fas fa-ticket-alt"></i> 每日車費</td><td>${transportCostComparison}（香港平均數據：${hkStats.avgTransportCost} HKD，來源：香港運輸署 2024 年報告）</td></tr>
            </table>
        `;
        document.getElementById('comparison-report').innerHTML = comparisonReport;

        function shareToSocial(platform) {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`我嘅工作 CP 值係 ${worth} 分 - ${result}！快啲試吓你嘅工作點樣！`);
            let shareUrl;
            if (platform === 'facebook') {
                shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`;
            } else if (platform === 'twitter') {
                shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${text}`;
            }
            window.open(shareUrl, '_blank');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('連結已複製！快啲同朋友分享！');
            });
        }
    </script>
</body>
</html>